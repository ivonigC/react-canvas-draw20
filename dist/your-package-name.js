/*! For license information please see your-package-name.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.YourPackageName=t():e.YourPackageName=t()}(this,(()=>(()=>{var e={269:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=(r=n(382))&&r.__esModule?r:{default:r},a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.segments,r=void 0===n?50:n,i=t.iterationLimit,a=void 0===i?100:i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.p1=new o.default,this.p2=new o.default,this.segments=r,this.iterationLimit=a}return i(e,[{key:"drawToCanvas",value:function(e,t,n,r){this.p1.update(t),this.p2.update(n);var i=this.p1.x>this.p2.x,o=i?this.p2:this.p1,a=i?this.p1:this.p2,s=[],c=!0;if(o.getDistanceTo(a)<r)if(a.x-o.x>.01){var u=a.x-o.x,l=a.y-o.y,h=-this.getCatenaryParameter(u,l,r,this.iterationLimit),f=.5*(h*Math.log((r+l)/(r-l))-u),d=h*Math.cosh(f/h),p=o.x-f,v=o.y-d;s=this.getCurve(h,o,a,p,v,this.segments),c=!1}else{var y=.5*(o.x+a.x),b=.5*(o.y+a.y+r);s=[[o.x,o.y],[y,b],[a.x,a.y]]}else s=[[o.x,o.y],[a.x,a.y]];return c?this.drawLine(s,e):this.drawCurve(s,e),s}},{key:"getCatenaryParameter",value:function(e,t,n,r){for(var i=Math.sqrt(n*n-t*t)/e,o=Math.acosh(i)+1,a=-1,s=0;Math.abs(o-a)>1e-6&&s<r;)a=o,o-=(Math.sinh(o)-i*o)/(Math.cosh(o)-i),s++;return e/(2*o)}},{key:"getCurve",value:function(e,t,n,r,i,o){for(var a=[t.x,e*Math.cosh((t.x-r)/e)+i],s=n.x-t.x,c=o-1,u=0;u<c;u++){var l=t.x+s*(u+.5)/c,h=e*Math.cosh((l-r)/e)+i;a.push(l,h)}return a.push(n.x,e*Math.cosh((n.x-r)/e)+i),a}},{key:"drawLine",value:function(e,t){t.moveTo(e[0][0],e[0][1]),t.lineTo(e[1][0],e[1][1])}},{key:"drawCurve",value:function(e,t){var n=.5*e.length-1,r=e[2],i=e[3],o=[];t.moveTo(e[0],e[1]);for(var a=2;a<n;a++){var s=e[2*a],c=e[2*a+1],u=.5*(s+r),l=.5*(c+i);o.push([r,i,u,l]),t.quadraticCurveTo(r,i,u,l),r=s,i=c}return n=e.length,t.quadraticCurveTo(e[n-4],e[n-3],e[n-2],e[n-1]),o}}]),e}();t.default=a},382:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),r=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.x=t,this.y=n}return n(e,[{key:"update",value:function(e){this.x=e.x,this.y=e.y}},{key:"getDifferenceTo",value:function(t){return new e(this.x-t.x,this.y-t.y)}},{key:"getDistanceTo",value:function(e){var t=this.getDifferenceTo(e);return Math.sqrt(Math.pow(t.x,2)+Math.pow(t.y,2))}}]),e}();t.default=r},596:(e,t,n)=>{"use strict";t.Op=void 0;var r=o(n(269)),i=o(n(382));function o(e){return e&&e.__esModule?e:{default:e}}t.Op=r.default,i.default},694:(e,t,n)=>{"use strict";var r=n(925);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,o,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},556:(e,t,n)=>{e.exports=n(694)()},925:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},287:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),d=Symbol.iterator,p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,y={};function b(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}function m(){}function w(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}b.prototype.isReactComponent={},b.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},b.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},m.prototype=b.prototype;var g=w.prototype=new m;g.constructor=w,v(g,b.prototype),g.isPureReactComponent=!0;var _=Array.isArray,x=Object.prototype.hasOwnProperty,S={current:null},O={key:!0,ref:!0,__self:!0,__source:!0};function M(e,t,r){var i,o={},a=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)x.call(t,i)&&!O.hasOwnProperty(i)&&(o[i]=t[i]);var c=arguments.length-2;if(1===c)o.children=r;else if(1<c){for(var u=Array(c),l=0;l<c;l++)u[l]=arguments[l+2];o.children=u}if(e&&e.defaultProps)for(i in c=e.defaultProps)void 0===o[i]&&(o[i]=c[i]);return{$$typeof:n,type:e,key:a,ref:s,props:o,_owner:S.current}}function D(e){return"object"==typeof e&&null!==e&&e.$$typeof===n}var E=/\/+/g;function P(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function C(e,t,i,o,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var c=!1;if(null===e)c=!0;else switch(s){case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case n:case r:c=!0}}if(c)return a=a(c=e),e=""===o?"."+P(c,0):o,_(a)?(i="",null!=e&&(i=e.replace(E,"$&/")+"/"),C(a,t,i,"",(function(e){return e}))):null!=a&&(D(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,i+(!a.key||c&&c.key===a.key?"":(""+a.key).replace(E,"$&/")+"/")+e)),t.push(a)),1;if(c=0,o=""===o?".":o+":",_(e))for(var u=0;u<e.length;u++){var l=o+P(s=e[u],u);c+=C(s,t,i,l,a)}else if(l=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"==typeof l)for(e=l.call(e),u=0;!(s=e.next()).done;)c+=C(s=s.value,t,i,l=o+P(s,u++),a);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return c}function T(e,t,n){if(null==e)return e;var r=[],i=0;return C(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function j(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},k={transition:null},L={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:k,ReactCurrentOwner:S};t.Children={map:T,forEach:function(e,t,n){T(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return T(e,(function(){t++})),t},toArray:function(e){return T(e,(function(e){return e}))||[]},only:function(e){if(!D(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=b,t.Fragment=i,t.Profiler=a,t.PureComponent=w,t.StrictMode=o,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L,t.cloneElement=function(e,t,r){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),o=e.key,a=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,s=S.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(u in t)x.call(t,u)&&!O.hasOwnProperty(u)&&(i[u]=void 0===t[u]&&void 0!==c?c[u]:t[u])}var u=arguments.length-2;if(1===u)i.children=r;else if(1<u){c=Array(u);for(var l=0;l<u;l++)c[l]=arguments[l+2];i.children=c}return{$$typeof:n,type:e.type,key:o,ref:a,props:i,_owner:s}},t.createContext=function(e){return(e={$$typeof:c,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=M,t.createFactory=function(e){var t=M.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=D,t.lazy=function(e){return{$$typeof:f,_payload:{_status:-1,_result:e},_init:j}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=k.transition;k.transition={};try{e()}finally{k.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.2.0"},540:(e,t,n)=>{"use strict";e.exports=n(287)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};return(()=>{"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?t(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):t(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function a(e,t,n){return(t=s(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(t){var n=function(t,n){if("object"!=e(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=e(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==e(n)?n:n+""}n.r(r),n.d(r,{default:()=>De});var c=Object.freeze({x:0,y:0,untransformedX:0,untransformedY:0}),u=Object.freeze({canvasWidth:0,canvasHeight:0,left:0,top:0,right:0,bottom:0,viewMin:c,viewMax:c}),l=Object.freeze({a:1,b:0,c:0,d:1,e:0,f:0}),h=function(){return e=function e(t){var n=this,r=t.scaleExtents,o=t.documentSize;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,"_scaleExtents",void 0),a(this,"_documentSize",void 0),a(this,"_canvas",null),a(this,"_view",{scale:1,x:0,y:0}),a(this,"_viewChangeListeners",new Set),a(this,"setScale",(function(e){n.setView({scale:e})})),a(this,"clampView",(function(e){var t=e.scale,r=e.x,i=e.y,o=n.scaleExtents,a=o.min,s=o.max,c=n.documentSize,l=c.width,h=c.height,f=n.canvasRect||u,d=f.left,p=f.top,v=f.right-d,y=f.bottom-p,b=v/2,m=-(l*n._view.scale-v/2),w=y/2,g=-(h*n._view.scale-y/2);return{scale:Math.min(Math.max(t,a),s),x:Math.min(Math.max(r,m),b),y:Math.min(Math.max(i,g),w)}})),a(this,"resetView",(function(){n.setView({scale:1,x:0,y:0})})),a(this,"setView",(function(e){var t=n.clampView(i(i({},n._view),e||{})),r=n._view,o=r.scale,a=r.x,s=r.y;return t.scale===o&&t.x===a&&t.y===s||(n._view=t,n._viewChangeListeners.forEach((function(e){return e&&e(t)}))),i({},n._view)})),a(this,"scaleAtClientPoint",(function(e,t){var r=n.clientPointToViewPoint(t),o=n.clampView(i(i({},n._view),{},{scale:n._view.scale+e})),a=n.viewPointToClientPoint(r,o);return o.x=n._view.x-(a.clientX-t.clientX),o.y=n._view.y-(a.clientY-t.clientY),n.setView(o)})),a(this,"clientPointToViewPoint",(function(e){var t=e.clientX,r=e.clientY,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n._view,o=n.canvasRect||u,a=t-o.left,s=r-o.top;return{x:(a-i.x)/i.scale,y:(s-i.y)/i.scale,relativeClientX:a,relativeClientY:s}})),a(this,"viewPointToClientPoint",(function(e){var t=e.x,r=e.y,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n._view,o=n.canvasRect||u,a=o.left,s=o.top,c=t*i.scale+i.x,l=r*i.scale+i.y,h=c+a,f=l+s;return{clientX:h,clientY:f,relativeX:c,relativeY:l,x:h,y:f}})),a(this,"attachViewChangeListener",(function(e){n._viewChangeListeners.add(e)})),this._scaleExtents=r,this._documentSize=o},(t=[{key:"canvas",get:function(){return this._canvas},set:function(e){this._canvas=e,this.setView()}},{key:"scale",get:function(){return this._view.scale}},{key:"x",get:function(){return this._view.x},set:function(e){this.setView({x:e})}},{key:"y",get:function(){return this._view.y},set:function(e){this.setView({y:e})}},{key:"view",get:function(){return i({},this._view)}},{key:"scaleExtents",get:function(){return i({},this._scaleExtents)},set:function(e){var t=e.min,n=e.max;this._scaleExtents={min:t,max:n},this.setView()}},{key:"documentSize",get:function(){return i({},this._documentSize)},set:function(e){var t=e.width,n=e.height;this._documentSize={width:t,height:n},this.setView()}},{key:"transformMatrix",get:function(){return{a:this._view.scale,b:0,c:0,d:this._view.scale,e:this._view.x,f:this._view.y}}},{key:"canvasBounds",get:function(){if(this._canvas){var e=this._canvas.getBoundingClientRect(),t=e.left,n=e.top,r=e.right,i=e.bottom;return{viewMin:this.clientPointToViewPoint({clientX:t,clientY:n}),viewMax:this.clientPointToViewPoint({clientX:r,clientY:i}),left:t,top:n,right:r,bottom:i,canvasWidth:this._canvas.width,canvasHeight:this._canvas.height}}}},{key:"canvasRect",get:function(){return this.canvas?this.canvas.getBoundingClientRect():void 0}}])&&o(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}(),f=n(540),d=n(596);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,w(r.key),r)}}function y(e,t,n){return t&&v(e.prototype,t),n&&v(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t,n){return(t=w(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w(e){var t=function(e,t){if("object"!=p(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==p(t)?t:t+""}var g=function(e){e.preventDefault()},_=y((function e(){var t=this;b(this,e),m(this,"handleMouseWheel",(function(e,n){var r=n.props,i=r.disabled,o=r.enablePanAndZoom,a=r.mouseZoomFactor;return i?new x:(o&&e.ctrlKey&&(e.preventDefault(),n.coordSystem.scaleAtClientPoint(a*e.deltaY,T(e))),t)})),m(this,"handleDrawStart",(function(e,t){return t.props.disabled?new x:e.ctrlKey&&t.props.enablePanAndZoom?(new S).handleDrawStart(e,t):(new O).handleDrawStart(e,t)})),m(this,"handleDrawMove",(function(e,n){if(n.props.disabled)return new x;var r=j(n.coordSystem,e),i=r.x,o=r.y;return n.lazy.update({x:i,y:o}),t})),m(this,"handleDrawEnd",(function(e,n){return n.props.disabled?new x:t}))})),x=y((function e(){var t=this;b(this,e),m(this,"handleMouseWheel",(function(e,n){return n.props.disabled?t:(new _).handleMouseWheel(e,n)})),m(this,"handleDrawStart",(function(e,n){return n.props.disabled?t:(new _).handleDrawStart(e,n)})),m(this,"handleDrawMove",(function(e,n){return n.props.disabled?t:(new _).handleDrawMove(e,n)})),m(this,"handleDrawEnd",(function(e,n){return n.props.disabled?t:(new _).handleDrawEnd(e,n)}))})),S=y((function e(){var t=this;b(this,e),m(this,"handleMouseWheel",g.bind(this)),m(this,"handleDrawStart",(function(e,n){return e.preventDefault(),t.dragStart=T(e),t.panStart={x:n.coordSystem.x,y:n.coordSystem.y},t})),m(this,"handleDrawMove",(function(e,n){e.preventDefault();var r=T(e),i=r.clientX,o=r.clientY,a=i-t.dragStart.clientX,s=o-t.dragStart.clientY;return n.coordSystem.setView({x:t.panStart.x+a,y:t.panStart.y+s}),t})),m(this,"handleDrawEnd",(function(){return new _}))})),O=y((function e(){var t=this;b(this,e),m(this,"handleMouseWheel",g.bind(this)),m(this,"handleDrawStart",(function(e,n){var r=n.props.enablePanAndZoom;return e.preventDefault(),e.touches&&e.touches.length&&r?r&&e.touches&&e.touches.length>=2?(new M).handleDrawStart(e,n):t.handleDrawMove(e,n):(new P).handleDrawStart(e,n)})),m(this,"handleDrawMove",(function(e,n){if(e.preventDefault(),e.touches&&e.touches.length>=2)return(new M).handleDrawStart(e,n);var r=T(e);return t.deferredPoints.push(r),(new Date).valueOf()-t.startTimestamp<250&&(null===t.startClientPoint&&(t.startClientPoint=r),Math.abs(r.clientX-t.startClientPoint.clientX)+Math.abs(r.clientY-t.startClientPoint.clientY)<10)?t:t.issueDeferredPoints(n)})),m(this,"handleDrawEnd",(function(e,n){return t.issueDeferredPoints(n).handleDrawEnd(e,n)})),m(this,"issueDeferredPoints",(function(e){for(var n=new P,r=0;r<t.deferredPoints.length;r++){var i=t.deferredPoints[r],o=new C(i);n=(0===r?n.handleDrawStart:n.handleDrawMove)(o,e)}return n})),this.startClientPoint=null,this.startTimestamp=(new Date).valueOf(),this.deferredPoints=[]})),M=y((function e(){var t=this;b(this,e),m(this,"handleMouseWheel",g.bind(this)),m(this,"handleDrawStart",(function(e,n){return e.preventDefault(),!e.touches||e.touches.length<2?new _:(t.start=t.getTouchMetrics(e),t.panStart={x:n.coordSystem.x,y:n.coordSystem.y},t.scaleStart=n.coordSystem.scale,t)})),m(this,"handleDrawMove",(function(e,n){if(e.preventDefault(),!e.touches||e.touches.length<2)return new _;var r=t.recentMetrics=t.getTouchMetrics(e),i=r.centroid,o=r.distance;if(Math.abs(o-t.start.distance)>=10)return new E(t).handleDrawMove(e,n);var a=i.clientX-t.start.centroid.clientX,s=i.clientY-t.start.centroid.clientY;return Math.abs(a)+Math.abs(s)>=10?new D(t).handleDrawMove(e,n):t})),m(this,"handleDrawEnd",(function(){return new _})),m(this,"getTouchMetrics",(function(e){var t=T(e.touches[0]),n=t.clientX,r=t.clientY,i=T(e.touches[1]),o=i.clientX,a=i.clientY,s=o-n,c=a-r;return{t1:{clientX:n,clientY:r},t2:{clientX:o,clientY:a},distance:Math.sqrt(s*s+c*c),centroid:{clientX:(n+o)/2,clientY:(r+a)/2}}}))})),D=y((function e(t){var n=this;b(this,e),m(this,"handleMouseWheel",g.bind(this)),m(this,"handleDrawStart",(function(){return n})),m(this,"handleDrawMove",(function(e,t){if(e.preventDefault(),!e.touches||e.touches.length<2)return new _;var r=n.scaleOrPanState,i=r.recentMetrics=r.getTouchMetrics(e),o=i.centroid,a=(i.distance,o.clientX-r.start.centroid.clientX),s=o.clientY-r.start.centroid.clientY;return t.setView({x:r.panStart.x+a,y:r.panStart.y+s}),n})),m(this,"handleDrawEnd",(function(){return new _})),this.scaleOrPanState=t})),E=y((function e(t){var n=this;b(this,e),m(this,"handleMouseWheel",g.bind(this)),m(this,"handleDrawStart",(function(){return n})),m(this,"handleDrawMove",(function(e,t){if(e.preventDefault(),!e.touches||e.touches.length<2)return new _;var r=n.scaleOrPanState,i=r.recentMetrics=r.getTouchMetrics(e),o=i.centroid,a=i.distance,s=r.scaleStart*(a/r.start.distance)-t.coordSystem.scale;return t.coordSystem.scaleAtClientPoint(s,o),n})),m(this,"handleDrawEnd",(function(){return new _})),this.scaleOrPanState=t})),P=y((function e(){var t=this;b(this,e),m(this,"handleMouseWheel",g.bind(this)),m(this,"handleDrawStart",(function(e,n){if(e.preventDefault(),e.touches&&e.touches.length){var r=j(n.coordSystem,e),i=r.x,o=r.y;n.lazy.update({x:i,y:o},{both:!0})}return t.handleDrawMove(e,n)})),m(this,"handleDrawMove",(function(e,n){e.preventDefault();var r=j(n.coordSystem,e),i=r.x,o=r.y;n.lazy.update({x:i,y:o});var a=!n.lazy.isEnabled();return t.isDrawing&&!a||(n.points.push(n.clampPointToDocument(n.lazy.brush.toObject())),t.isDrawing=!0),n.points.push(n.clampPointToDocument(n.lazy.brush.toObject())),n.drawPoints({points:n.points,brushColor:n.props.brushColor,brushRadius:n.props.brushRadius}),t})),m(this,"handleDrawEnd",(function(e,n){return e.preventDefault(),t.handleDrawMove(e,n),n.saveLine(),new _})),this.isDrawing=!1})),C=y((function e(t){var n=t.clientX,r=t.clientY;b(this,e),m(this,"preventDefault",(function(){})),this.clientX=n,this.clientY=r,this.touches=[{clientX:n,clientY:r}]}));function T(e){var t=e.clientX,n=e.clientY;return e.changedTouches&&e.changedTouches.length>0&&(t=e.changedTouches[0].clientX,n=e.changedTouches[0].clientY),{clientX:t,clientY:n}}function j(e,t){return e.clientPointToViewPoint(T(t))}var R=Object.defineProperty,k=(e,t,n)=>(((e,t,n)=>{t in e?R(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);function L(e){return 1-Math.sqrt(1-Math.pow(e,2))}class z{constructor(e,t){k(this,"x"),k(this,"y"),this.x=e,this.y=t}update(e){return this.x=e.x,this.y=e.y,this}moveByAngle(e,t,n){const r=e+Math.PI/2;return n?(this.x=this.x+Math.sin(r)*t*L(1-n),this.y=this.y-Math.cos(r)*t*L(1-n)):(this.x=this.x+Math.sin(r)*t,this.y=this.y-Math.cos(r)*t),this}equalsTo(e){return this.x===e.x&&this.y===e.y}getDifferenceTo(e){return new z(this.x-e.x,this.y-e.y)}getDistanceTo(e){const t=this.getDifferenceTo(e);return Math.sqrt(Math.pow(t.x,2)+Math.pow(t.y,2))}getAngleTo(e){const t=this.getDifferenceTo(e);return Math.atan2(t.y,t.x)}toObject(){return{x:this.x,y:this.y}}}class A{constructor(e={}){k(this,"_isEnabled"),k(this,"_hasMoved"),k(this,"radius"),k(this,"pointer"),k(this,"brush"),k(this,"angle"),k(this,"distance");const t=e.initialPoint||{x:0,y:0};this.radius=e.radius||30,this._isEnabled=!1!==e.enabled,this.pointer=new z(t.x,t.y),this.brush=new z(t.x,t.y),this.angle=0,this.distance=0,this._hasMoved=!1}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}isEnabled(){return this._isEnabled}setRadius(e){this.radius=e}getRadius(){return this.radius}getBrushCoordinates(){return this.brush.toObject()}getPointerCoordinates(){return this.pointer.toObject()}getBrush(){return this.brush}getPointer(){return this.pointer}getAngle(){return this.angle}getDistance(){return this.distance}brushHasMoved(){return this._hasMoved}update(e,t={}){if(this._hasMoved=!1,this.pointer.equalsTo(e)&&!t.both&&!t.friction)return!1;if(this.pointer.update(e),t.both)return this._hasMoved=!0,this.brush.update(e),!0;if(this._isEnabled){this.distance=this.pointer.getDistanceTo(this.brush),this.angle=this.pointer.getAngleTo(this.brush);const e=Math.round(10*(this.distance-this.radius))/10>0,n=t.friction&&t.friction<1&&t.friction>0?t.friction:void 0;e&&(this.brush.moveByAngle(this.angle,this.distance-this.radius,n),this._hasMoved=!0)}else this.distance=0,this.angle=0,this.brush.update(e),this._hasMoved=!0;return!0}}var W=n(556),V=n.n(W),I=function(){if("undefined"!=typeof Map)return Map;function e(e,t){var n=-1;return e.some((function(e,r){return e[0]===t&&(n=r,!0)})),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var n=e(this.__entries__,t),r=this.__entries__[n];return r&&r[1]},t.prototype.set=function(t,n){var r=e(this.__entries__,t);~r?this.__entries__[r][1]=n:this.__entries__.push([t,n])},t.prototype.delete=function(t){var n=this.__entries__,r=e(n,t);~r&&n.splice(r,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var n=0,r=this.__entries__;n<r.length;n++){var i=r[n];e.call(t,i[1],i[0])}},t}()}(),Y="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,X=void 0!==n.g&&n.g.Math===Math?n.g:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),H="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(X):function(e){return setTimeout((function(){return e(Date.now())}),1e3/60)},q=["top","right","bottom","left","width","height","size","weight"],$="undefined"!=typeof MutationObserver,B=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,t){var n=!1,r=!1,i=0;function o(){n&&(n=!1,e()),r&&s()}function a(){H(o)}function s(){var e=Date.now();if(n){if(e-i<2)return;r=!0}else n=!0,r=!1,setTimeout(a,t);i=e}return s}(this.refresh.bind(this),20)}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter((function(e){return e.gatherActive(),e.hasActive()}));return e.forEach((function(e){return e.broadcastActive()})),e.length>0},e.prototype.connect_=function(){Y&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),$?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){Y&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=void 0===t?"":t;q.some((function(e){return!!~n.indexOf(e)}))&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),F=function(e,t){for(var n=0,r=Object.keys(t);n<r.length;n++){var i=r[n];Object.defineProperty(e,i,{value:t[i],enumerable:!1,writable:!1,configurable:!0})}return e},G=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||X},N=Q(0,0,0,0);function U(e){return parseFloat(e)||0}function Z(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce((function(t,n){return t+U(e["border-"+n+"-width"])}),0)}var J="undefined"!=typeof SVGGraphicsElement?function(e){return e instanceof G(e).SVGGraphicsElement}:function(e){return e instanceof G(e).SVGElement&&"function"==typeof e.getBBox};function K(e){return Y?J(e)?function(e){var t=e.getBBox();return Q(0,0,t.width,t.height)}(e):function(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return N;var r=G(e).getComputedStyle(e),i=function(e){for(var t={},n=0,r=["top","right","bottom","left"];n<r.length;n++){var i=r[n],o=e["padding-"+i];t[i]=U(o)}return t}(r),o=i.left+i.right,a=i.top+i.bottom,s=U(r.width),c=U(r.height);if("border-box"===r.boxSizing&&(Math.round(s+o)!==t&&(s-=Z(r,"left","right")+o),Math.round(c+a)!==n&&(c-=Z(r,"top","bottom")+a)),!function(e){return e===G(e).document.documentElement}(e)){var u=Math.round(s+o)-t,l=Math.round(c+a)-n;1!==Math.abs(u)&&(s-=u),1!==Math.abs(l)&&(c-=l)}return Q(i.left,i.top,s,c)}(e):N}function Q(e,t,n,r){return{x:e,y:t,width:n,height:r}}var ee=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=Q(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e=K(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),te=function(e,t){var n,r,i,o,a,s,c,u=(r=(n=t).x,i=n.y,o=n.width,a=n.height,s="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,c=Object.create(s.prototype),F(c,{x:r,y:i,width:o,height:a,top:i,right:r+o,bottom:a+i,left:r}),c);F(this,{target:e,contentRect:u})},ne=function(){function e(e,t,n){if(this.activeObservations_=[],this.observations_=new I,"function"!=typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=n}return e.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof G(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new ee(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof G(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach((function(t){t.isActive()&&e.activeObservations_.push(t)}))},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map((function(e){return new te(e.target,e.broadcastRect())}));this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),re="undefined"!=typeof WeakMap?new WeakMap:new I,ie=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=B.getInstance(),r=new ne(t,n,this);re.set(this,r)};["observe","unobserve","disconnect"].forEach((function(e){ie.prototype[e]=function(){var t;return(t=re.get(this))[e].apply(t,arguments)}}));const oe=void 0!==X.ResizeObserver?X.ResizeObserver:ie;var ae=!1;try{var se={get passive(){return ae=!0,!1}};window.addEventListener("test",se,se),window.removeEventListener("test",se,se)}catch(k){ae=!1}function ce(e){return ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ce(e)}function ue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function le(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ue(Object(n),!0).forEach((function(t){we(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ue(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function he(e){return function(e){if(Array.isArray(e))return de(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||fe(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fe(e,t){if(e){if("string"==typeof e)return de(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?de(e,t):void 0}}function de(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function pe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ge(r.key),r)}}function ve(e,t,n){return t=be(t),function(e,t){if(t&&("object"===ce(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ye()?Reflect.construct(t,n||[],be(e).constructor):t.apply(e,n))}function ye(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ye=function(){return!!e})()}function be(e){return be=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},be(e)}function me(e,t){return me=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},me(e,t)}function we(e,t,n){return(t=ge(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ge(e){var t=function(e,t){if("object"!=ce(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=ce(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ce(t)?t:t+""}function _e(e,t){return{x:e.x+(t.x-e.x)/2,y:e.y+(t.y-e.y)/2}}var xe={display:"block",position:"absolute"},Se=["grid","drawing","temp","interface"],Oe=V().oneOfType([V().number,V().string]),Me=V().shape({min:V().number.isRequired,max:V().number.isRequired}),De=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),we(n=ve(this,t,[e]),"undo",(function(){var e=[];n.lines.length?e=n.lines.slice(0,-1):n.erasedLines.length&&(e=n.erasedLines.pop()),n.clearExceptErasedLines(),n.simulateDrawingLines({lines:e,immediate:!0}),n.triggerOnChange()})),we(n,"eraseAll",(function(){n.erasedLines.push(he(n.lines)),n.clearExceptErasedLines(),n.triggerOnChange()})),we(n,"clear",(function(){n.erasedLines=[],n.clearExceptErasedLines(),n.resetView()})),we(n,"resetView",(function(){return n.coordSystem.resetView()})),we(n,"setView",(function(e){return n.coordSystem.setView(e)})),we(n,"getSaveData",(function(){return JSON.stringify({lines:n.lines,width:n.props.canvasWidth,height:n.props.canvasHeight})})),we(n,"getDataURL",(function(e,t,r){var i=n.canvas.drawing,o=i.getContext("2d"),a=i.width,s=i.height,c=o.getImageData(0,0,a,s),u=o.globalCompositeOperation;if(o.globalCompositeOperation="destination-over",t){if(!n.props.imgSrc)return"Background image source not set";n.drawImage()}else null!=r&&(o.fillStyle=r,o.fillRect(0,0,a,s));e||(e="png");var l=i.toDataURL("image/".concat(e));return o.clearRect(0,0,a,s),o.putImageData(c,0,0),o.globalCompositeOperation=u,l})),we(n,"loadSaveData",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.props.immediateLoading;if("string"!=typeof e)throw new Error("saveData needs to be of type string!");var r=JSON.parse(e),i=r.lines,o=r.width,a=r.height;if(!i||"function"!=typeof i.push)throw new Error("saveData.lines needs to be an array!");if(n.clear(),o===n.props.canvasWidth&&a===n.props.canvasHeight)n.simulateDrawingLines({lines:i,immediate:t});else{var s=n.props.canvasWidth/o,c=n.props.canvasHeight/a,u=(s+c)/2;n.simulateDrawingLines({lines:i.map((function(e){return le(le({},e),{},{points:e.points.map((function(e){return{x:e.x*s,y:e.y*c}})),brushRadius:e.brushRadius*u})})),immediate:t})}})),we(n,"componentWillUnmount",(function(){n.canvasObserver.unobserve(n.canvasContainer),n.canvas.interface&&n.canvas.interface.removeEventListener("wheel",n.handleWheel)})),we(n,"handleWheel",(function(e){n.interactionSM=n.interactionSM.handleMouseWheel(e,n)})),we(n,"handleDrawStart",(function(e){n.interactionSM=n.interactionSM.handleDrawStart(e,n),n.mouseHasMoved=!0})),we(n,"handleDrawMove",(function(e){n.interactionSM=n.interactionSM.handleDrawMove(e,n),n.mouseHasMoved=!0})),we(n,"handleDrawEnd",(function(e){n.interactionSM=n.interactionSM.handleDrawEnd(e,n),n.mouseHasMoved=!0})),we(n,"applyView",(function(){if(n.ctx.drawing&&(Se.map((function(e){return n.ctx[e]})).forEach((function(e){n.clearWindow(e);var t=n.coordSystem.transformMatrix;e.setTransform(t.a,t.b,t.c,t.d,t.e,t.f)})),!n.deferRedrawOnViewChange)){n.drawGrid(n.ctx.grid),n.redrawImage(),n.loop({once:!0});var e=n.lines;n.lines=[],n.simulateDrawingLines({lines:e,immediate:!0})}})),we(n,"handleCanvasResize",(function(e){var t=n.getSaveData();n.deferRedrawOnViewChange=!0;try{var r,i=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=fe(e))){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(e);try{for(i.s();!(r=i.n()).done;){var o=r.value.contentRect,a=o.width,s=o.height;n.setCanvasSize(n.canvas.interface,a,s),n.setCanvasSize(n.canvas.drawing,a,s),n.setCanvasSize(n.canvas.temp,a,s),n.setCanvasSize(n.canvas.grid,a,s),n.coordSystem.documentSize={width:a,height:s},n.drawGrid(n.ctx.grid),n.drawImage(),n.loop({once:!0})}}catch(e){i.e(e)}finally{i.f()}n.loadSaveData(t,!0)}finally{n.deferRedrawOnViewChange=!1}})),we(n,"clampPointToDocument",(function(e){return n.props.clampLinesToDocument?{x:Math.max(Math.min(e.x,n.props.canvasWidth),0),y:Math.max(Math.min(e.y,n.props.canvasHeight),0)}:e})),we(n,"redrawImage",(function(){n.image&&n.image.complete&&function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.ctx,n=e.img,r=e.x,i=e.y,o=e.w,a=e.h,s=e.offsetX,c=e.offsetY;"number"!=typeof r&&(r=0),"number"!=typeof i&&(i=0),"number"!=typeof o&&(o=t.canvas.width),"number"!=typeof a&&(a=t.canvas.height),"number"!=typeof s&&(s=.5),"number"!=typeof c&&(c=.5),s<0&&(s=0),c<0&&(c=0),s>1&&(s=1),c>1&&(c=1);var u,l,h,f,d=n.width,p=n.height,v=Math.min(o/d,a/p),y=d*v,b=p*v,m=1;y<o&&(m=o/y),Math.abs(m-1)<1e-14&&b<a&&(m=a/b),(u=(d-(h=d/((y*=m)/o)))*s)<0&&(u=0),(l=(p-(f=p/((b*=m)/a)))*c)<0&&(l=0),h>d&&(h=d),f>p&&(f=p),t.drawImage(n,u,l,h,f,r,i,o,a)}({ctx:n.ctx.grid,img:n.image})})),we(n,"simulateDrawingLines",(function(e){var t=e.lines,r=e.immediate,i=0,o=r?0:n.props.loadTimeOffset;t.forEach((function(e){var t=e.points,a=e.brushColor,s=e.brushRadius;if(r)return n.drawPoints({points:t,brushColor:a,brushRadius:s}),n.points=t,void n.saveLine({brushColor:a,brushRadius:s});for(var c=function(e){i+=o,window.setTimeout((function(){n.drawPoints({points:t.slice(0,e+1),brushColor:a,brushRadius:s})}),i)},u=1;u<t.length;u++)c(u);i+=o,window.setTimeout((function(){n.points=t,n.saveLine({brushColor:a,brushRadius:s})}),i)}))})),we(n,"setCanvasSize",(function(e,t,n){e.width=t,e.height=n,e.style.width=t,e.style.height=n})),we(n,"drawPoints",(function(e){var t=e.points,r=e.brushColor,i=e.brushRadius;n.ctx.temp.lineJoin="round",n.ctx.temp.lineCap="round",n.ctx.temp.strokeStyle=r,n.clearWindow(n.ctx.temp),n.ctx.temp.lineWidth=2*i;var o=t[0],a=t[1];n.ctx.temp.moveTo(a.x,a.y),n.ctx.temp.beginPath();for(var s=1,c=t.length;s<c;s++){var u=_e(o,a);n.ctx.temp.quadraticCurveTo(o.x,o.y,u.x,u.y),o=t[s],a=t[s+1]}n.ctx.temp.lineTo(o.x,o.y),n.ctx.temp.stroke()})),we(n,"saveLine",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.brushColor,r=e.brushRadius;n.points.length<2||(n.lines.push({points:he(n.points),brushColor:t||n.props.brushColor,brushRadius:r||n.props.brushRadius}),n.points.length=0,n.inClientSpace([n.ctx.drawing,n.ctx.temp],(function(){n.ctx.drawing.drawImage(n.canvas.temp,0,0,n.canvas.drawing.width,n.canvas.drawing.height)})),n.clearWindow(n.ctx.temp),n.triggerOnChange())})),we(n,"triggerOnChange",(function(){n.props.onChange&&n.props.onChange(n)})),we(n,"clearWindow",(function(e){n.inClientSpace([e],(function(){return e.clearRect(0,0,e.canvas.width,e.canvas.height)}))})),we(n,"clearExceptErasedLines",(function(){n.lines=[],n.valuesChanged=!0,n.clearWindow(n.ctx.drawing),n.clearWindow(n.ctx.temp)})),we(n,"loop",(function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).once,t=void 0!==e&&e;if(n.mouseHasMoved||n.valuesChanged){var r=n.lazy.getPointerCoordinates(),i=n.lazy.getBrushCoordinates();n.drawInterface(n.ctx.interface,r,i),n.mouseHasMoved=!1,n.valuesChanged=!1}t||window.requestAnimationFrame((function(){n.loop()}))})),we(n,"inClientSpace",(function(e,t){e.forEach((function(e){e.save(),e.setTransform(l.a,l.b,l.c,l.d,l.e,l.f)}));try{t()}finally{e.forEach((function(e){return e.restore()}))}})),we(n,"drawImage",(function(){n.props.imgSrc&&(n.image=new Image,n.image.crossOrigin="anonymous",n.image.onload=n.redrawImage,n.image.src=n.props.imgSrc)})),we(n,"drawGrid",(function(e){if(!n.props.hideGrid){n.clearWindow(e);var t=25,r=n.coordSystem.canvasBounds,i=r.viewMin,o=r.viewMax,a=Math.floor(i.x/t-1)*t,s=Math.floor(i.y/t-1)*t,c=o.x+t,u=o.y+t;if(e.beginPath(),e.setLineDash([5,1]),e.setLineDash([]),e.strokeStyle=n.props.gridColor,e.lineWidth=n.props.gridLineWidth,!n.props.hideGridX){for(var l=a,h=n.props.gridSizeX;l<c;)l+=h,e.moveTo(l,s),e.lineTo(l,u);e.stroke()}if(!n.props.hideGridY){for(var f=s,d=n.props.gridSizeY;f<u;)f+=d,e.moveTo(a,f),e.lineTo(c,f);e.stroke()}}})),we(n,"drawInterface",(function(e,t,r){n.props.hideInterface||(n.clearWindow(e),e.beginPath(),e.fillStyle=n.props.brushColor,e.arc(r.x,r.y,n.props.brushRadius,0,2*Math.PI,!0),e.fill(),e.beginPath(),e.fillStyle=n.props.catenaryColor,e.arc(t.x,t.y,4,0,2*Math.PI,!0),e.fill(),n.lazy.isEnabled()&&(e.beginPath(),e.lineWidth=2,e.lineCap="round",e.setLineDash([2,4]),e.strokeStyle=n.props.catenaryColor,n.catenary.drawToCanvas(n.ctx.interface,r,t,n.chainLength),e.stroke()),e.beginPath(),e.fillStyle=n.props.catenaryColor,e.arc(r.x,r.y,2,0,2*Math.PI,!0),e.fill())})),n.canvas={},n.ctx={},n.catenary=new d.Op,n.points=[],n.lines=[],n.erasedLines=[],n.mouseHasMoved=!0,n.valuesChanged=!0,n.isDrawing=!1,n.isPressing=!1,n.deferRedrawOnViewChange=!1,n.interactionSM=new _,n.coordSystem=new h({scaleExtents:e.zoomExtents,documentSize:{width:e.canvasWidth,height:e.canvasHeight}}),n.coordSystem.attachViewChangeListener(n.applyView.bind(n)),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&me(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){var e,t=this;this.lazy=new A({radius:this.props.lazyRadius*window.devicePixelRatio,enabled:!0,initialPoint:{x:window.innerWidth/2,y:window.innerHeight/2}}),this.chainLength=this.props.lazyRadius*window.devicePixelRatio,this.canvasObserver=new oe((function(e,n){return t.handleCanvasResize(e,n)})),this.canvasObserver.observe(this.canvasContainer),this.drawImage(),this.loop(),window.setTimeout((function(){var e=window.innerWidth/2,n=window.innerHeight/2;t.lazy.update({x:e-t.chainLength/4,y:n},{both:!0}),t.lazy.update({x:e+t.chainLength/4,y:n},{both:!1}),t.mouseHasMoved=!0,t.valuesChanged=!0,t.clearExceptErasedLines(),t.props.saveData&&t.loadSaveData(t.props.saveData)}),100),this.canvas.interface&&this.canvas.interface.addEventListener("wheel",this.handleWheel,ae?{passive:e}:e)}},{key:"componentDidUpdate",value:function(e){e.lazyRadius!==this.props.lazyRadius&&(this.chainLength=this.props.lazyRadius*window.devicePixelRatio,this.lazy.setRadius(this.props.lazyRadius*window.devicePixelRatio)),e.saveData!==this.props.saveData&&this.loadSaveData(this.props.saveData),JSON.stringify(e)!==JSON.stringify(this.props)&&(this.valuesChanged=!0),this.coordSystem.scaleExtents=this.props.zoomExtents,this.props.enablePanAndZoom||this.coordSystem.resetView(),e.imgSrc!==this.props.imgSrc&&this.drawImage()}},{key:"render",value:function(){var e=this;return f.createElement("div",{className:this.props.className,style:le({display:"block",background:this.props.backgroundColor,touchAction:"none",width:this.props.canvasWidth,height:this.props.canvasHeight},this.props.style),ref:function(t){t&&(e.canvasContainer=t)}},Se.map((function(t){var n="interface"===t;return f.createElement("canvas",{key:t,ref:function(r){r&&(e.canvas[t]=r,e.ctx[t]=r.getContext("2d"),n&&(e.coordSystem.canvas=r))},style:le({},xe),onMouseDown:n?e.handleDrawStart:void 0,onMouseMove:n?e.handleDrawMove:void 0,onMouseUp:n?e.handleDrawEnd:void 0,onMouseOut:n?e.handleDrawEnd:void 0,onTouchStart:n?e.handleDrawStart:void 0,onTouchMove:n?e.handleDrawMove:void 0,onTouchEnd:n?e.handleDrawEnd:void 0,onTouchCancel:n?e.handleDrawEnd:void 0})})))}}])&&pe(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(f.PureComponent);we(De,"propTypes",{onChange:V().func,loadTimeOffset:V().number,lazyRadius:V().number,brushRadius:V().number,brushColor:V().string,catenaryColor:V().string,gridColor:V().string,backgroundColor:V().string,hideGrid:V().bool,canvasWidth:Oe,canvasHeight:Oe,disabled:V().bool,imgSrc:V().string,saveData:V().string,immediateLoading:V().bool,hideInterface:V().bool,gridSizeX:V().number,gridSizeY:V().number,gridLineWidth:V().number,hideGridX:V().bool,hideGridY:V().bool,enablePanAndZoom:V().bool,mouseZoomFactor:V().number,zoomExtents:Me,clampLinesToDocument:V().bool}),we(De,"defaultProps",{onChange:null,loadTimeOffset:5,lazyRadius:12,brushRadius:10,brushColor:"#444",catenaryColor:"#0a0302",gridColor:"rgba(150,150,150,0.17)",backgroundColor:"#FFF",hideGrid:!1,canvasWidth:400,canvasHeight:400,disabled:!1,imgSrc:"",saveData:"",immediateLoading:!1,hideInterface:!1,gridSizeX:25,gridSizeY:25,gridLineWidth:.5,hideGridX:!1,hideGridY:!1,enablePanAndZoom:!1,mouseZoomFactor:.01,zoomExtents:{min:.33,max:3},clampLinesToDocument:!1})})(),r})()));